--- a/net/minecraft/server/Raid.java
+++ b/net/minecraft/server/Raid.java
@@ -137,14 +137,14 @@
     private void y() {
         Collection<EntityPlayer> collection = this.r.getPlayers();
         Set<EntityPlayer> set = Sets.newHashSet(collection);
-        Iterator iterator = collection.iterator();
+        Iterator iterator = set.iterator(); // CraftBukkit
 
         while (iterator.hasNext()) {
             EntityPlayer entityplayer = (EntityPlayer) iterator.next();
             BlockPosition blockposition = new BlockPosition(entityplayer);
 
             if (this.k.c_(blockposition) != this) {
-                set.remove(entityplayer);
+                iterator.remove(); // CraftBukkit
                 this.r.removePlayer(entityplayer);
             }
         }
